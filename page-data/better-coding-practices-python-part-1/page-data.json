{"componentChunkName":"component---src-templates-blog-post-js","path":"/better-coding-practices-python-part-1/","result":{"data":{"site":{"siteMetadata":{"title":"Alacrity"}},"markdownRemark":{"id":"62527321-d313-5ee1-9724-177884b29adf","excerpt":"Introduction Code review is an integral part of a developer’s day-to-day life. Getting mega pint of code review comments has lots of problems but most…","html":"<h1>Introduction</h1>\n<p>Code review is an integral part of a developer’s day-to-day life. Getting mega pint of code review comments has lots of problems but most importantly it hurts developer-ego! I hope you’ll find this article helpful.</p>\n<blockquote>\n<p><strong>Disclaimer</strong>: This blog does not claim to be one-and-only solution for all coding problems. Apart from some adopted community guidelines everything is subjective to the coder or reviewer. This is merely my opinions and compiled list of bad coding practices I’ve found through my experience. All the code examples are made to demonstrate a single problem at a time.</p>\n</blockquote>\n<h2>1. Variable Names</h2>\n<h3>Bad</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">temp <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"banana\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"apple\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"grape\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">}</span>\nlist1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\nlist2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> k<span class=\"token punctuation\">,</span> v <span class=\"token keyword\">in</span> temp<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    list1<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span>\n    list2<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"fruits: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>list1<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"colors: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>list2<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Good</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">fruit_colors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"banana\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"apple\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"grape\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">}</span>\nfruits <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\ncolors <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> fruit<span class=\"token punctuation\">,</span> color <span class=\"token keyword\">in</span> fruit_colors<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    fruits<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>fruit<span class=\"token punctuation\">)</span>\n    colors<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"fruits: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>fruits<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"colors: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>colors<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Pros</h3>\n<ul>\n<li>Code readability</li>\n<li>Less-prone to bugs</li>\n</ul>\n<h2>2. Exeption Handling</h2>\n<h3>Bad</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    fruit_colors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"banana\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"apple\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"grape\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">}</span>\n    color <span class=\"token operator\">=</span> fruit_colors<span class=\"token punctuation\">[</span><span class=\"token string\">\"watermelon\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to get color of watermelon :(\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Good</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">fruit_colors <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token string\">\"banana\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"yellow\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"apple\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"grape\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"green\"</span><span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    color <span class=\"token operator\">=</span> fruit_colors<span class=\"token punctuation\">[</span><span class=\"token string\">\"watermelon\"</span><span class=\"token punctuation\">]</span>\n<span class=\"token keyword\">except</span> KeyError<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to get color of watermelon :(\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Pros</h3>\n<ul>\n<li>Code readability</li>\n<li>Easy troubleshooting</li>\n</ul>\n<h2>3. Utilizing Standard Library</h2>\n<h3>Bad</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">fruits <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"apple\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"banana\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"grape\"</span><span class=\"token punctuation\">]</span>\n\ni <span class=\"token operator\">=</span> <span class=\"token number\">0</span>\n<span class=\"token keyword\">for</span> fruit <span class=\"token keyword\">in</span> fruits<span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>fruit<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span>\n    i <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></code></pre></div>\n<h3>Good</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">fruits <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"apple\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"banana\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"grape\"</span><span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">for</span> i<span class=\"token punctuation\">,</span> fruit <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>fruits<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"</span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>i<span class=\"token punctuation\">}</span></span><span class=\"token string\">: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>fruit<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Pros</h3>\n<ul>\n<li>Compact</li>\n</ul>\n<h2>4. Error Logging</h2>\n<h3>Bad</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    res <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://www.google.com\"</span><span class=\"token punctuation\">)</span>\n    res<span class=\"token punctuation\">.</span>raise_for_status<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    logging<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">\"Success!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span>\n    logging<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">(</span><span class=\"token string-interpolation\"><span class=\"token string\">f\"Unexpected error occured: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>e<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Good</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span>\n    res <span class=\"token operator\">=</span> requests<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">\"https://www.google.com\"</span><span class=\"token punctuation\">)</span>\n    res<span class=\"token punctuation\">.</span>raise_for_status<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    logging<span class=\"token punctuation\">.</span>info<span class=\"token punctuation\">(</span><span class=\"token string\">\"Success!\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> HTTPError <span class=\"token keyword\">as</span> err<span class=\"token punctuation\">:</span>\n    logging<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">(</span>\n        <span class=\"token string-interpolation\"><span class=\"token string\">f\"Request failed with status code: </span><span class=\"token interpolation\"><span class=\"token punctuation\">{</span>err<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>status_code<span class=\"token punctuation\">}</span></span><span class=\"token string\">\"</span></span>\n    <span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">except</span> Exception<span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># logging.exception logs traceback information</span>\n    logging<span class=\"token punctuation\">.</span>exception<span class=\"token punctuation\">(</span><span class=\"token string\">\"Unexpected error occured:\"</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Pros</h3>\n<ul>\n<li>Code readability</li>\n<li>Easy troubleshooting</li>\n</ul>\n<h2>5. Block Comments</h2>\n<h3>Bad</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\">username <span class=\"token operator\">=</span> username<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nusername <span class=\"token operator\">=</span> username<span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nusername <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span><span class=\"token string\">r\"\\s+\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> username<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> re<span class=\"token punctuation\">.</span><span class=\"token keyword\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">r\"^[a-zA-Z0-9_]{5,20}$\"</span><span class=\"token punctuation\">,</span> username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid username\"</span><span class=\"token punctuation\">)</span>\n    exit<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Good</h3>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token comment\"># Perform string transforms on the username</span>\nusername <span class=\"token operator\">=</span> username<span class=\"token punctuation\">.</span>lower<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nusername <span class=\"token operator\">=</span> username<span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nusername <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span><span class=\"token string\">r\"\\s+\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> username<span class=\"token punctuation\">)</span>\n\n<span class=\"token comment\"># Check if username is valid</span>\n<span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> re<span class=\"token punctuation\">.</span><span class=\"token keyword\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">r\"^[a-zA-Z0-9_]{5,20}$\"</span><span class=\"token punctuation\">,</span> username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Invalid username\"</span><span class=\"token punctuation\">)</span>\n    exit<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Pros</h3>\n<ul>\n<li>Code readability</li>\n</ul>\n<h1>Conclusion</h1>\n<p>This blog is a part of a series and each of these points can be extended with some advanced scenarios. Unfortunately, I can’t mention all the scenarios in a single blog so I will try to cover other cases in future parts. Feel free to reach out if you have any questions, suggestions for improvments or any good coding practice you’ve found.</p>","frontmatter":{"title":"Better Coding Practices / Python / Part-1","date":"July 02, 2022","description":"A developer's guide to reduce code review comments, improve code quality and maintainability with examples","previewImage":"better-coding-practices.png"}},"previous":{"fields":{"slug":"/yarn-audit-at-scale-with-splunk/"},"frontmatter":{"title":"Yarn Audit at Scale using Splunk"}},"next":null},"pageContext":{"id":"62527321-d313-5ee1-9724-177884b29adf","previousPostId":"22dc804e-2ffc-586d-a402-96e000411112","nextPostId":null}},"staticQueryHashes":["3134424800","3257411868"]}